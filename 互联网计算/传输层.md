## 传输层

![](http://pic.mikumifa.cn/2022/10/31/ba47df7b6444c.png)

segmenting upper-layer

分割上层应用程序数据(新的数据单元-数据段)
建立端到端(end to end)的运营
从一个终端主机向另一个终端主机发送段
流量控制和可靠性

- 可以比喻为与外国人交谈:通常，您会要求外国人重复他/她的话(可靠性)并慢声说话(流量控制)
  双方主机的网络的处理能力不同，缓存能力不同

TCP和UDP协议

## TCP

可靠的

软件校验，保证数据正常的

会有应答（acknowledge）

如果没有应答或者错误，会进行重传

flow control，使用流控制，保证正确

## UDP

不可靠的

无线的，

没有应答

没有软件校验

没有流控制

## Service Model

端口来让不同进程之间不会产生冲突

0-65535（2个字节）0-255的端口是，分配给public application

0-1023的端口也有规范的分配

对于其他的应用也有登记使用

## Socket



- 源端口和目的端口---2个组合

端口是运输层和应用层的接口

传输层的复用和分用功能都要通过端口才能实现

- 确认号，期望收到对方的下一个报文段的数据的第一个字节的序号

- 数据偏移，指出TCP报文段的数据起始处距TCP报文段的起始处的长度

- 保留位没有使用

- URG=1，表示有紧急指针字段

- ACK，=1时候表示有效

- ![](http://pic.mikumifa.cn/2022/10/31/8ebf6ab0149c2.png)

- RST复位，释放连接重新建立运输连接

  ![](http://pic.mikumifa.cn/2022/10/31/04195383d74b2.png)

