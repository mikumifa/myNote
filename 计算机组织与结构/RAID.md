# RAID

 冗余磁盘阵列 / 独立磁盘冗余阵列

基本思想

 • 将多个独立操作的磁盘按某种方式组织成磁盘阵列，以增加容量

 • 将数据存储在多个盘体上，通过这些盘并行工作来提高数据传输率

 • 采用数据冗余来进行错误恢复以提高系统可靠

![image-20221117124807172](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117124807172.png)

## RAID 0

 数据以条带的形式在可用磁盘上分布

不采用冗余来改善性能（不是RAID家族中的成员）

![image-20221117125031493](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117125031493.png)

## RAID 1

采用数据条带

采用简单地备份所有数据的方法来实现冗余

![image-20221117125243677](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117125243677.png)

优点

高速响应I/O的请求：同一个磁盘上的数据块，也可以由两组硬盘分别响应，两个I/O请求所需要的数据块可能在 不同的磁盘上。

**读请求**可用选择寻道是间较小的那一个

**写请求**需要更新2个对应的条带，可以并行完成，但是受限于写入较慢的磁盘

单个磁盘损坏时不会影响数据的访问，恢复受损磁盘简单

### 用途

只限于用在存储系统软件、数据和其他关键文件的驱动器中

### 与 RAID 0 相比

如果有大批的读请求，则RAID 1能实现高速的I/O速率，性能可以达到RAID 0 的两倍 

如果I/O请求有相当大的部分是写请求，则它不比RAID 0的性能好多少

> 读的快，写的速度和RAID0 差不多

### RAID 01 vs. RAID 10

![image-20221117130215364](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117130215364.png)

RAID10是先做镜象，然后再做条带。 RAID01则是先做条带，然后再做镜象。 

```
 1、RAID10的情况     
 这种情况中，我们假设当DISK0损坏时，在剩下的3块盘中，只有当DISK1一个盘发生故障时，才会导致整个RAID失效，我们可简单计算故障率为1/3。
 2、RAID01的情况
这种情况下，我们仍然假设DISK0损坏，这时左边的条带将无法读取。
在剩下的3块盘中，只要DISK2，DISK3两个盘中任何一个损坏，都会导致整个RAID失效，我们可简单计算故障率为2/3。 因此RAID10比RAID01在安全性方面要强。    
从数据存储的逻辑位置来看，在正常的情况下RAID01和RAID10是完全一样的，而且每一个读写操作所产生的IO数量也是一样的，所以在读写性能上两者没什么区别。而当有磁盘出现故障时，比如前面假设的DISK0损坏时，我们也可以发现，这两种情况下，在读的性能上面也将不同，RAID10的读性能将优于RAID01。
```

## RAID2

 采用并行存取技术

### 目标 

所有磁盘都参与每个I/O请求的执行

### 特点 

各个驱动器的轴是同步旋转的，因此每个磁盘上的每个磁头在任何时刻都位于 同一位置 

采用数据条带：条带非常小，经常只有一个字节或一个字

### 纠错

对位于同一条带的各个数据盘上的数据位计算校验码（通常采用海明码），校 验码存储在该条带中多个校验盘的对应位置

### 访问

读取：获取请求的数据和对应的校验码 

写入：所有数据盘和校验盘都被访问

### 缺点

冗余盘依然比较多，价格较贵 

适用于多磁盘易出错环境，对于单个磁盘和磁盘驱动器已经具备高可靠性的情 况没有意义（实际基本弃用）

## RAID3

### 采用并行存取技术 

各个驱动器的轴同步旋转 

采用非常小的数据条带 •

### 校验：

对所有数据盘上同一位置的数据计算奇偶校验码 

• 当某一磁盘损坏时，可以用于重构数据 𝑏0 = 𝑃(𝑏)⨁𝑏1 ⨁𝑏2⨁𝑏3 

![image-20221117132020387](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132020387.png)

![image-20221117132032604](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132032604.png)

![image-20221117132039885](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132039885.png)

![image-20221117132045205](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132045205.png)

![image-20221117132051229](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132051229.png)

![image-20221117132056348](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132056348.png)

![image-20221117132102549](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132102549.png)

![image-20221117132107412](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132107412.png)

![image-20221117132114612](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132114612.png)

![image-20221117132121445](https://blog-1314638240.cos.ap-nanjing.myqcloud.com/image/image-20221117132121445.png)