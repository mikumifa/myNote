# C语言的编译过程

编写源程序->预处理->编译->汇编->链接

编译器负责预处理和编译，汇编器负责汇编，链接器负责链接

## 1. 预处理（形成main.i)

1. 删除所有define，展开所有的宏定义（字符替换）
2. 处理所有的条件编译指令
3. 处理#include，将include指向的头文件插入该行
4. 删除所有注释
5. 添加行号和文件标示，这样调试和编译出错时才知道哪个文件在那行
6. 保留#pragma，编译器需要他们（指定一个跟踪选择）

## 2. 编译（形成main.s)

实质是把高级程序语言变成汇编语言(经过词法分析，语法分析，语义分析)

## 3. 汇编(形成main.o)

> 有的时候会把编译和汇编统一说成编译

把汇编语言变成机器语言

## 4. 链接(形成可执行文件.exe)

✦ 当源程序很大时，可以将它分为多个源程序，通过编译可以形成多个目标文件(Unix: .o)，这时我们需要用链接器把它们连接到一起，生成一个可执行文件；

✦ 程序中调用了某个库文件中的子程序, 需要将这个库文件和该程序生成的目标文件连接到一起，生成一个可执行文件；

✦ 一个源程序编译后，得到了存有机器码的目标文件，目标文件中的有些内容还不能直接用来生成可执行文件，链接器程序将这些内容处理为最终的可执行信息. 所以，在只有一个源程序文件，而又不需要调用某个库中的子程序时，也必须用链接器对目标文件进行处理，生成可执行文件